SELECT * FROM DBA_USERS;

DROP TABLE KOPO_CATEGORY CASCADE CONSTRAINTS;

DROP TABLE KOPO_USERS CASCADE CONSTRAINTS;

DROP TABLE KOPO_PRODUCT CASCADE CONSTRAINTS;

DROP TABLE KOPO_ORDER CASCADE CONSTRAINTS;

DROP TABLE KOPO_ORDER_LIST CASCADE CONSTRAINTS;

SELECT * FROM KOPO_CATEGORY;

SELECT * FROM KOPO_USERS;

SELECT * FROM KOPO_PRODUCT;

SELECT * FROM KOPO_ORDER;

SELECT * FROM KOPO_ORDER_LIST;


--문제 3번. 테이블 생성
--문제 4번. 생성한 테이블에 자료넣기
--문제 5번, 참조 무결성 제약조건 위반
--INSERT INTO KOPO_ORDER_LIST
--(ORDERID_FK, PRODUCTCODE_FK)
--VALUES ('2017','I07');


--1.분류 테이블
CREATE TABLE KOPO_CATEGORY(
CATCODE VARCHAR2(100),
NAME VARCHAR2(100),
CONSTRAINTS PK_KOPO_CATEGORY PRIMARY KEY(CATCODE)
);

--1.1 분류 테이블 자료넣기 
INSERT INTO KOPO_CATEGORY
(CATCODE,NAME)
VALUES('M01','IRONMAN');

INSERT INTO KOPO_CATEGORY
(CATCODE,NAME)
VALUES('M02','CAPTAINAMERICA');

INSERT INTO KOPO_CATEGORY
(CATCODE,NAME)
VALUES('M03','THOR');

INSERT INTO KOPO_CATEGORY
(CATCODE,NAME)
VALUES('M04','HULK');

INSERT INTO KOPO_CATEGORY
(CATCODE,NAME)
VALUES('M05','STARROAD');

SELECT * FROM KOPO_CATEGORY;

--2.상품 테이블
CREATE TABLE KOPO_PRODUCT (
PRODUCTCODE VARCHAR2(100),
CATCODE_FK VARCHAR2(100),
NAME VARCHAR2(100),
COMPANY VARCHAR2(100),
PRICE NUMBER,
BUY_NUM NUMBER,
STATUS VARCHAR2(100),
DETAILS VARCHAR2(100),
C_DATE VARCHAR2(100),
CONSTRAINTS PK_KOPO_PRODUCT PRIMARY KEY(PRODUCTCODE),
CONSTRAINTS FK_KOPO_PRODUCT FOREIGN KEY(CATCODE_FK) REFERENCES KOPO_CATEGORY(CATCODE)
);

--2.1 상품 테이블 자료넣기
INSERT INTO KOPO_PRODUCT
(PRODUCTCODE,CATCODE_FK,NAME,COMPANY, PRICE, BUY_NUM, STATUS, DETAILS, C_DATE)
VALUES('I01','M01','IRONMAN01','MARVEL','100','10000','ONSALE','AVENGER01','20190430');

INSERT INTO KOPO_PRODUCT
(PRODUCTCODE,CATCODE_FK,NAME,COMPANY, PRICE, BUY_NUM, STATUS, DETAILS, C_DATE)
VALUES('I02','M02','CAPTAINAMERICA01','MARVEL','200','20000','ONSALE','AVENGER02','20190430');

INSERT INTO KOPO_PRODUCT
(PRODUCTCODE,CATCODE_FK,NAME,COMPANY, PRICE, BUY_NUM, STATUS, DETAILS, C_DATE)
VALUES('I03','M03','HULK01','MARVEL','300','30000','ONSALE','AVENGER03','20190430');

INSERT INTO KOPO_PRODUCT
(PRODUCTCODE,CATCODE_FK,NAME,COMPANY, PRICE, BUY_NUM, STATUS, DETAILS, C_DATE)
VALUES('I04','M04','THOR01','MARVEL','400','40000','ONSALE','AVENGER04','20190430');

INSERT INTO KOPO_PRODUCT
(PRODUCTCODE,CATCODE_FK,NAME,COMPANY, PRICE, BUY_NUM, STATUS, DETAILS, C_DATE)
VALUES('I05','M05','STARROAD01','MARVEL','500','50000','ONSALE','AVENGER05','20190430');

SELECT * from KOPO_PRODUCT;


--3.회원 테이블
CREATE TABLE KOPO_USERS (
USERID VARCHAR2(100),
USERNAME VARCHAR2(100),
PASSWORD VARCHAR2(100),
CARD_COMPANY VARCHAR2(100),
CARD_NO VARCHAR2(100),
ADDRESS VARCHAR2(100),
TEL VARCHAR2(100),
EMAIL VARCHAR2(100),
CONSTRAINTS PK_KOPO_USERS PRIMARY KEY(USERID)
); 

--3.1 회원 테이블 데이터 넣기
INSERT INTO KOPO_USERS
(USERID)
VALUES ('IRON01');


INSERT INTO KOPO_USERS
(USERID)
VALUES ('IRON02');


INSERT INTO KOPO_USERS
(USERID)
VALUES ('IRON03');


INSERT INTO KOPO_USERS
(USERID)
VALUES ('IRON04');


INSERT INTO KOPO_USERS
(USERID)
VALUES ('IRON05');

SELECT * FROM KOPO_USERS;

--4.주문 테이블
CREATE TABLE KOPO_ORDER (
ORDERID VARCHAR2(100),
USERID_FK VARCHAR2(100),
ORDER_STATUS VARCHAR2(100),
ORDER_DATE VARCHAR2(100),
ORDER_PRICE NUMBER,
CONSTRAINTS PK_KOPO_ORDER PRIMARY KEY(ORDERID),
CONSTRAINTS FK_KOPO_ORDER FOREIGN KEY(USERID_FK) REFERENCES KOPO_USERS (USERID)
);

--4.1 주문 테이블 자료 넣기 
INSERT INTO KOPO_ORDER
(ORDERID, USERID_FK)
VALUES ('2012', 'IRON01');

INSERT INTO KOPO_ORDER
(ORDERID, USERID_FK)
VALUES ('2013','IRON02');

INSERT INTO KOPO_ORDER
(ORDERID, USERID_FK)
VALUES ('2014','IRON03');

INSERT INTO KOPO_ORDER
(ORDERID, USERID_FK)
VALUES ('2015','IRON04');

INSERT INTO KOPO_ORDER
(ORDERID, USERID_FK)
VALUES ('2016','IRON05');

SELECT * FROM KOPO_ORDER;

--5. 주문2 테이블
CREATE TABLE KOPO_ORDER_LIST(
ORDERID_FK VARCHAR2(100),
PRODUCTCODE_FK VARCHAR2(100),
COUNT NUMBER, 
CONSTRAINTS PK_KOPO_ORDER_LIST PRIMARY KEY(ORDERID_FK, PRODUCTCODE_FK),
CONSTRAINTS FK_KOPO_ORDER_LIST FOREIGN KEY(ORDERID_FK) REFERENCES KOPO_ORDER(ORDERID),
CONSTRAINTS FK2_KOPO_ORDER_LIST FOREIGN KEY(PRODUCTCODE_FK) REFERENCES KOPO_PRODUCT(PRODUCTCODE)
);

INSERT INTO KOPO_ORDER_LIST
(ORDERID_FK, PRODUCTCODE_FK)
VALUES ('2012','I01');


INSERT INTO KOPO_ORDER_LIST
(ORDERID_FK, PRODUCTCODE_FK)
VALUES ('2013','I02');


INSERT INTO KOPO_ORDER_LIST
(ORDERID_FK, PRODUCTCODE_FK)
VALUES ('2014','I03');


INSERT INTO KOPO_ORDER_LIST
(ORDERID_FK, PRODUCTCODE_FK)
VALUES ('2015','I04');


INSERT INTO KOPO_ORDER_LIST
(ORDERID_FK, PRODUCTCODE_FK)
VALUES ('2016','I05');

